<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>QUnit Example</title>
    <link rel="stylesheet" href="lib/qunit/qunit-1.18.0.css">
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture"></div>
<div id="tree"></div>
<script src="lib/qunit/qunit-1.18.0.js"></script>
<script src="app/tree.js"></script>
<script>
    var checkHTML = function (html) {
        var doc = document.createElement('div');
        doc.innerHTML = html;
        return ( doc.innerHTML === html );
    };
</script>
<script>
    QUnit.module("Node");
    QUnit.test("Should check that adding child to node will add parent to child", function (assert) {
        var parent = new Node('1', 'Parent');
        var child = new Node('2', 'Child');
        parent.addChild(child);
        assert.equal(child.parentNode, parent);
    });

    QUnit.test("Should check that node should not produce malformed html", function (assert) {
        var parent = new Node('1', 'Parent');
        var child1 = new Node('2', 'Child 1');
        var child2 = new Node('3', 'Child 2');
        parent.addChild(child1);
        parent.addChild(child2);
        assert.ok(checkHTML(parent.getHtml()));
    });

    QUnit.module("NodeRegistry", {
        beforeEach: function () {
            this.nodeRegistry = new NodeRegistry();
        }
    });
    QUnit.test("Should check that nodeRegistry should give correct ids to nodes", function (assert) {
        var parent1 = this.nodeRegistry.createNode('Parent 1');
        var parent2 = this.nodeRegistry.createNode('Parent 2');
        assert.ok(parent1.id);
        assert.ok(parent2.id);
        assert.notEqual(parent1.id, parent2);
    });

    QUnit.test("Should check that nodeRegistry keeps nodes in registry after creation", function (assert) {
        var parent1 = this.nodeRegistry.createNode('Parent 1');
        var parent2 = this.nodeRegistry.createNode('Parent 2');
        assert.equal(parent1, this.nodeRegistry.nodes[1]);
        assert.equal(parent2, this.nodeRegistry.nodes[2]);
    });
</script>

</body>
</html>